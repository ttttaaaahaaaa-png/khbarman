<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پایگاه خبری حرفه‌ای | اخبار فوری، سیاسی، ورزشی</title>
    <meta name="description" content="پایگاه خبری حرفه‌ای با پوشش جامع اخبار فوری، سیاسی، ورزشی، اقتصادی و فناوری. آخرین اخبار ایران و جهان به صورت لحظه‌ای.">
    <meta name="keywords" content="اخبار فوری, اخبار سیاسی, اخبار ورزشی, خبرگزاری, خبر آنلاین, تیتر اول">
    <meta name="google-site-verification" content="SSTe_k4cLQvs29sdAPbJAHfMpRhwpcVuXOcf4DT-ccc" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --sport-color: #27ae60;
            --political-color: #9b59b6;
            --economic-color: #f39c12;
            --tech-color: #1abc9c;
            --urgent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #1a2530;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* انیمیشن‌ها */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1000px; }
        }
        
        /* استایل عمومی */
        a {
            text-decoration: none;
            color: var(--secondary-color);
            transition: var(--transition);
        }
        
        a:hover {
            color: var(--accent-color);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 16px;
            transition: var(--transition);
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        .btn-sport {
            background-color: var(--sport-color);
        }
        
        .btn-sport:hover {
            background-color: #1e8449;
        }
        
        .btn-political {
            background-color: var(--political-color);
        }
        
        .btn-political:hover {
            background-color: #8e44ad;
        }
        
        .btn-urgent {
            background-color: var(--urgent-color);
        }
        
        .btn-urgent:hover {
            background-color: #c0392b;
        }
        
        /* هدر */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 800;
            color: white;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-left: 10px;
            color: #3498db;
        }
        
        .logo span {
            color: #3498db;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-right: 20px;
        }
        
        nav ul li a {
            color: white;
            font-weight: 600;
            position: relative;
            padding: 5px 0;
            font-size: 16px;
        }
        
        nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 2px;
            background-color: #3498db;
            transition: var(--transition);
        }
        
        nav ul li a:hover::after {
            width: 100%;
        }
        
        nav ul li a.active {
            color: #3498db;
        }
        
        .user-actions {
            display: flex;
            align-items: center;
        }
        
        .user-actions button {
            margin-right: 10px;
        }
        
        /* دایره پروفایل در گوشه چپ بالا */
        .profile-circle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            z-index: 1100;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: var(--transition);
        }
        
        .profile-circle:hover {
            transform: scale(1.1);
        }
        
        .profile-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* منوی پروفایل */
        .profile-menu {
            position: fixed;
            top: 90px;
            left: 20px;
            width: 250px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1100;
            overflow: hidden;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .profile-menu.active {
            display: block;
        }
        
        .menu-header {
            padding: 15px;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
        }
        
        .menu-header img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-left: 10px;
            border: 2px solid white;
        }
        
        .menu-header div {
            display: flex;
            flex-direction: column;
        }
        
        .menu-divider {
            height: 1px;
            background-color: #eee;
            margin: 5px 0;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: #333;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .menu-item:hover {
            background-color: #f8f9fa;
            color: var(--secondary-color);
            padding-right: 20px;
        }
        
        .menu-item i {
            margin-left: 10px;
            width: 20px;
            text-align: center;
        }
        
        .logout-item {
            color: var(--accent-color);
        }
        
        /* بخش اصلی */
        .main-content {
            min-height: calc(100vh - 200px);
            padding: 30px 0;
            animation: fadeIn 1s ease;
        }
        
        /* بخش اخبار */
        .news-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            right: 0;
            width: 100px;
            height: 3px;
            background-color: var(--accent-color);
        }
        
        .section-title.sport-title::after {
            background-color: var(--sport-color);
        }
        
        .section-title.political-title::after {
            background-color: var(--political-color);
        }
        
        .section-title.urgent-title::after {
            background-color: var(--urgent-color);
        }
        
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .news-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .news-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        
        .news-image {
            height: 200px;
            width: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .news-card:hover .news-image {
            transform: scale(1.05);
        }
        
        .news-content {
            padding: 20px;
        }
        
        .news-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--primary-color);
            line-height: 1.4;
        }
        
        .news-excerpt {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .news-meta {
            display: flex;
            justify-content: space-between;
            color: #888;
            font-size: 14px;
        }
        
        /* صفحه دسته‌بندی */
        .category-header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 30px 0;
            margin-bottom: 30px;
            border-radius: 10px;
        }
        
        .category-header.urgent {
            background: linear-gradient(135deg, var(--urgent-color), #c0392b);
        }
        
        .category-header.sport {
            background: linear-gradient(135deg, var(--sport-color), #1e8449);
        }
        
        .category-header.political {
            background: linear-gradient(135deg, var(--political-color), #8e44ad);
        }
        
        .category-header.economic {
            background: linear-gradient(135deg, var(--economic-color), #e67e22);
        }
        
        .category-header.tech {
            background: linear-gradient(135deg, var(--tech-color), #16a085);
        }
        
        .category-title {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .category-description {
            font-size: 18px;
            opacity: 0.9;
        }
        
        /* پخش زنده */
        .live-section {
            margin-bottom: 40px;
        }
        
        .live-broadcast {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            border-radius: 10px;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .live-indicator {
            display: inline-flex;
            align-items: center;
            background-color: var(--accent-color);
            padding: 5px 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }
        
        .live-indicator .dot {
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .live-title {
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .live-description {
            margin-bottom: 20px;
            opacity: 0.9;
        }
        
        /* فوتر */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
            margin-top: 50px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
        }
        
        .footer-links a:hover {
            color: var(--secondary-color);
            padding-right: 5px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            color: #aaa;
            font-size: 14px;
        }
        
        /* مودال‌ها */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            overflow: hidden;
            animation: slideInRight 0.4s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            font-size: 22px;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-modal:hover {
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-control:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }
        
        /* پنل مدیریت */
        .admin-panel {
            display: none;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-top: 30px;
            animation: fadeIn 1s ease;
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .admin-tabs {
            display: flex;
            overflow-x: auto;
            margin-bottom: 25px;
            border-bottom: 1px solid #ddd;
        }
        
        .admin-tab {
            padding: 12px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .admin-tab:hover {
            color: var(--primary-color);
        }
        
        .admin-tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .news-form textarea {
            min-height: 200px;
            resize: vertical;
        }
        
        .image-preview {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .image-preview-item {
            width: 100px;
            height: 100px;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            left: 5px;
            width: 25px;
            height: 25px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }
        
        .user-list {
            list-style: none;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
            transition: var(--transition);
        }
        
        .user-item:hover {
            transform: translateX(-5px);
            box-shadow: var(--shadow);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-info img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 15px;
            border: 2px solid var(--secondary-color);
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-password {
            font-family: monospace;
            background-color: #eee;
            padding: 2px 5px;
            border-radius: 3px;
            margin-top: 5px;
            font-size: 12px;
            color: #e74c3c;
        }
        
        /* صفحه افزودن/ویرایش خبر */
        .add-news-page {
            display: none;
        }
        
        .add-news-page.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }
        
        .add-news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .add-news-form {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        /* نمایش ویدیو */
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .video-container iframe,
        .video-container video {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* دکمه‌های ویرایش و حذف */
        .news-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* رسپانسیو */
        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
            }
            
            nav ul {
                margin: 20px 0;
            }
            
            .user-actions {
                margin-top: 10px;
            }
        }
        
        @media (max-width: 768px) {
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 10px 10px;
            }
            
            .news-grid {
                grid-template-columns: 1fr;
            }
            
            .user-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .user-info {
                margin-bottom: 15px;
            }
            
            .profile-circle {
                width: 50px;
                height: 50px;
                top: 15px;
                left: 15px;
            }
            
            .profile-menu {
                top: 75px;
                left: 15px;
                width: 200px;
            }
        }
        
        /* کلاس‌های کمکی */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-30 { margin-top: 30px; }
        .mb-30 { margin-bottom: 30px; }
        .d-none { display: none; }
        .d-flex { display: flex; }
        .justify-between { justify-content: space-between; }
        .align-center { align-items: center; }
        .w-100 { width: 100%; }
        .text-danger { color: var(--accent-color); }
        .text-success { color: var(--success-color); }
        .text-warning { color: var(--warning-color); }
    </style>
</head>
<body>
    <!-- دایره پروفایل در گوشه چپ بالا -->
    <div class="profile-circle d-none" id="profileCircle">
        <img src="https://ui-avatars.com/api/?name=کاربر&background=3498db&color=fff" alt="پروفایل" id="profileCircleImg">
    </div>
    
    <!-- منوی پروفایل -->
    <div class="profile-menu" id="profileMenu">
        <div class="menu-header">
            <img src="https://ui-avatars.com/api/?name=کاربر&background=3498db&color=fff" alt="پروفایل" id="menuAvatar">
            <div>
                <strong id="menuName">نام کاربر</strong>
                <small id="menuEmail">ایمیل کاربر</small>
            </div>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-item" id="menuAdminPanel">
            <i class="fas fa-cog"></i>
            <span>پنل مدیریت</span>
        </div>
        <div class="menu-item" id="menuUserPanel">
            <i class="fas fa-user"></i>
            <span>پنل کاربری</span>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-item logout-item" id="menuLogout">
            <i class="fas fa-sign-out-alt"></i>
            <span>خروج از حساب</span>
        </div>
    </div>

    <!-- هدر -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-newspaper"></i>
                پایگاه خبری <span>حرفه‌ای</span>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-page="home">خانه</a></li>
                    <li><a href="#" class="nav-link" data-page="urgent">اخبار فوری</a></li>
                    <li><a href="#" class="nav-link" data-page="political">اخبار سیاسی</a></li>
                    <li><a href="#" class="nav-link" data-page="sport">اخبار ورزشی</a></li>
                    <li><a href="#" class="nav-link" data-page="economic">اقتصادی</a></li>
                    <li><a href="#" class="nav-link" data-page="tech">فناوری</a></li>
                </ul>
            </nav>
            
            <div class="user-actions">
                <button class="btn" id="loginBtn">ورود</button>
                <button class="btn btn-success" id="registerBtn">ثبت‌نام</button>
            </div>
        </div>
    </header>

    <!-- صفحه اصلی (خانه) -->
    <div class="main-content container" id="homePage">
        <!-- بخش پخش زنده -->
        <section class="live-section">
            <h2 class="section-title">پخش زنده</h2>
            <div class="live-broadcast">
                <div class="live-indicator">
                    <span class="dot"></span>
                    <span>پخش زنده</span>
                </div>
                <h3 class="live-title" id="liveTitle">گزارش زنده از نشست اضطراری مجلس درباره تحولات منطقه</h3>
                <p class="live-description" id="liveDescription">پوشش زنده نشست اضطراری مجلس شورای اسلامی درباره تحولات منطقه‌ای و تصمیم‌گیری در مورد سیاست‌های خارجی کشور. نمایندگان به صورت زنده نظرات خود را ارائه می‌دهند.</p>
                <div class="live-player" id="livePlayer">
                    <div style="background: linear-gradient(135deg, #000, #2c3e50); color: white; height: 300px; display: flex; align-items: center; justify-content: center; border-radius: 5px;">
                        <i class="fas fa-satellite-dish fa-3x" style="margin-left: 15px;"></i>
                        <div>
                            <h4>پخش زنده در حال انجام است</h4>
                            <p>برای مشاهده پخش زنده، لطفاً وارد حساب کاربری خود شوید</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- بخش اخبار -->
        <section class="news-section">
            <h2 class="section-title">آخرین اخبار</h2>
            <div class="news-grid" id="newsContainer">
                <!-- اخبار به صورت دینامیک لود می‌شوند -->
            </div>
        </section>
    </div>

    <!-- صفحه اخبار فوری -->
    <div class="main-content container d-none" id="urgentPage">
        <div class="category-header urgent">
            <h1 class="category-title">اخبار فوری</h1>
            <p class="category-description">آخرین و مهم‌ترین اخبار فوری لحظه‌ای کشور و جهان - به محض وقوع</p>
        </div>
        
        <div class="news-section">
            <div class="news-grid" id="urgentNewsContainer">
                <!-- اخبار فوری به صورت دینامیک لود می‌شوند -->
            </div>
        </div>
        
        <div class="text-center mt-30">
            <button class="btn btn-urgent" id="addUrgentNewsBtn">+ افزودن خبر فوری جدید</button>
        </div>
    </div>

    <!-- صفحه اخبار سیاسی -->
    <div class="main-content container d-none" id="politicalPage">
        <div class="category-header political">
            <h1 class="category-title">اخبار سیاسی</h1>
            <p class="category-description">تحلیل‌ها و گزارش‌های جامع از تحولات سیاسی داخلی و بین‌المللی</p>
        </div>
        
        <div class="news-section">
            <div class="news-grid" id="politicalNewsContainer">
                <!-- اخبار سیاسی به صورت دینامیک لود می‌شوند -->
            </div>
        </div>
        
        <div class="text-center mt-30">
            <button class="btn btn-political" id="addPoliticalNewsBtn">+ افزودن خبر سیاسی جدید</button>
        </div>
    </div>

    <!-- صفحه اخبار ورزشی -->
    <div class="main-content container d-none" id="sportPage">
        <div class="category-header sport">
            <h1 class="category-title">اخبار ورزشی</h1>
            <p class="category-description">پوشش جامع رویدادهای ورزشی داخلی و بین‌المللی - نتایج زنده مسابقات</p>
        </div>
        
        <div class="news-section">
            <div class="news-grid" id="sportNewsContainer">
                <!-- اخبار ورزشی به صورت دینامیک لود می‌شوند -->
            </div>
        </div>
        
        <div class="text-center mt-30">
            <button class="btn btn-sport" id="addSportNewsBtn">+ افزودن خبر ورزشی جدید</button>
        </div>
    </div>

    <!-- صفحه افزودن/ویرایش خبر -->
    <div class="main-content container d-none" id="addNewsPage">
        <div class="add-news-header">
            <h1 class="section-title" id="addNewsTitle">افزودن خبر جدید</h1>
            <button class="btn" id="backToCategoryBtn">بازگشت</button>
        </div>
        
        <div class="add-news-form">
            <form id="addNewsForm">
                <div class="form-group">
                    <label for="newsTitle">عنوان خبر:</label>
                    <input type="text" id="newsTitle" class="form-control" placeholder="عنوان خبر را وارد کنید" required>
                </div>
                
                <div class="form-group">
                    <label for="newsContent">محتوای خبر:</label>
                    <textarea id="newsContent" class="form-control" placeholder="متن کامل خبر را وارد کنید" rows="10" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="newsImage">آدرس تصویر خبر:</label>
                    <input type="text" id="newsImage" class="form-control" placeholder="آدرس اینترنتی تصویر را وارد کنید">
                    <small class="text-warning">می‌توانید از آدرس‌های نمونه مانند: https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80 استفاده کنید</small>
                </div>
                
                <div class="form-group">
                    <label for="newsVideo">آدرس ویدیو (اختیاری):</label>
                    <input type="text" id="newsVideo" class="form-control" placeholder="آدرس اینترنتی ویدیو را وارد کنید">
                    <small class="text-warning">می‌توانید از آدرس‌های یوتیوب یا سایر سرویس‌های میزبانی ویدیو استفاده کنید</small>
                </div>
                
                <div class="form-group">
                    <label>دسته‌بندی:</label>
                    <div id="newsCategoryDisplay" class="form-control" style="background-color: #f8f9fa; font-weight: 600;"></div>
                    <input type="hidden" id="newsCategory">
                </div>
                
                <div class="form-group">
                    <label for="newsExcerpt">خلاصه خبر (اختیاری):</label>
                    <textarea id="newsExcerpt" class="form-control" placeholder="خلاصه کوتاه خبر را وارد کنید (اگر خالی بگذارید، ۱۵۰ کاراکتر اول متن استفاده می‌شود)" rows="3"></textarea>
                </div>
                
                <div class="d-flex justify-between">
                    <button type="submit" class="btn btn-success" id="submitNewsBtn">انتشار خبر</button>
                    <button type="button" class="btn" id="previewNewsBtn">پیش‌نمایش</button>
                </div>
            </form>
        </div>
    </div>

    <!-- پنل مدیریت -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h2>پنل مدیریت حرفه‌ای</h2>
            <button class="btn" id="backToHomeFromAdminBtn">بازگشت به خانه</button>
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="news-management">مدیریت اخبار</button>
            <button class="admin-tab" data-tab="user-management">مدیریت کاربران</button>
            <button class="admin-tab" data-tab="live-management">مدیریت پخش زنده</button>
            <button class="admin-tab" data-tab="broadcast-management">پخش اخبار</button>
        </div>
        
        <div class="tab-content active" id="news-management">
            <h3 class="mb-20">اخبار منتشر شده</h3>
            <div class="form-group">
                <input type="text" id="searchNews" class="form-control" placeholder="جستجوی اخبار بر اساس عنوان یا دسته‌بندی...">
            </div>
            
            <div id="publishedNews">
                <!-- اخبار منتشر شده به صورت دینامیک نمایش داده می‌شوند -->
            </div>
        </div>
        
        <div class="tab-content" id="user-management">
            <h3 class="mb-20">مدیریت کاربران (نمایش کامل اطلاعات)</h3>
            <div class="form-group">
                <input type="text" id="searchUser" class="form-control" placeholder="جستجوی کاربر بر اساس نام، ایمیل یا نقش...">
            </div>
            
            <ul class="user-list" id="userList">
                <!-- لیست کاربران به صورت دینامیک نمایش داده می‌شود -->
            </ul>
        </div>
        
        <div class="tab-content" id="live-management">
            <h3 class="mb-20">کنترل پخش زنده</h3>
            <div class="form-group">
                <label for="liveStatus">وضعیت پخش:</label>
                <select id="liveStatus" class="form-control">
                    <option value="active">فعال</option>
                    <option value="inactive">غیرفعال</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="liveTitle">عنوان پخش زنده:</label>
                <input type="text" id="liveTitleInput" class="form-control" placeholder="عنوان پخش زنده را وارد کنید">
            </div>
            
            <div class="form-group">
                <label for="liveDescription">توضیحات پخش زنده:</label>
                <textarea id="liveDescriptionInput" class="form-control" placeholder="توضیحات پخش زنده را وارد کنید"></textarea>
            </div>
            
            <div class="form-group">
                <label for="liveStreamUrl">آدرس استریم:</label>
                <input type="text" id="liveStreamUrl" class="form-control" placeholder="آدرس استریم را وارد کنید">
                <small class="text-warning">برای تست می‌توانید از آدرس ویدیوی یوتیوب استفاده کنید</small>
            </div>
            
            <button type="button" class="btn btn-success" id="updateLiveBtn">به‌روزرسانی پخش زنده</button>
        </div>
        
        <div class="tab-content" id="broadcast-management">
            <h3 class="mb-20">پخش اخبار برای کاربران</h3>
            <div class="form-group">
                <label for="broadcastNews">انتخاب خبر برای پخش:</label>
                <select id="broadcastNews" class="form-control">
                    <option value="">یک خبر را انتخاب کنید</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="broadcastMessage">پیام همراه با پخش (اختیاری):</label>
                <textarea id="broadcastMessage" class="form-control" placeholder="پیامی که همراه با خبر پخش می‌شود را وارد کنید..." rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label>پخش برای:</label>
                <div>
                    <label style="margin-left: 15px;">
                        <input type="radio" name="broadcastTarget" value="all" checked> همه کاربران
                    </label>
                    <label style="margin-left: 15px;">
                        <input type="radio" name="broadcastTarget" value="specific"> کاربران خاص
                    </label>
                </div>
            </div>
            
            <div class="form-group" id="specificUsersContainer" style="display: none;">
                <label for="specificUsers">انتخاب کاربران:</label>
                <select id="specificUsers" class="form-control" multiple style="height: 150px;">
                </select>
                <small>برای انتخاب چند کاربر، کلید Ctrl را نگه دارید</small>
            </div>
            
            <button type="button" class="btn btn-success" id="sendBroadcastBtn">ارسال خبر به کاربران</button>
            
            <div class="mt-30">
                <h4 class="mb-20">تاریخچه پخش اخبار</h4>
                <div id="broadcastHistory">
                    <!-- تاریخچه پخش اخبار نمایش داده می‌شود -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- پنل کاربری -->
    <div class="admin-panel" id="userPanel">
        <div class="admin-header">
            <h2>پنل کاربری</h2>
            <button class="btn" id="backToHomeFromUserBtn">بازگشت به خانه</button>
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="user-profile">پروفایل کاربری</button>
            <button class="admin-tab" data-tab="user-news">اخبار من</button>
            <button class="admin-tab" data-tab="user-settings">تنظیمات</button>
        </div>
        
        <div class="tab-content active" id="user-profile">
            <div class="profile-header" style="display: flex; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--light-color);">
                <div class="profile-avatar" style="position: relative; margin-left: 30px;">
                    <img src="https://ui-avatars.com/api/?name=کاربر&background=3498db&color=fff" alt="پروفایل کاربر" id="userProfileAvatar">
                    <div class="change-avatar" id="changeAvatarBtn" style="position: absolute; bottom: 10px; left: 10px; width: 35px; height: 35px; background-color: var(--primary-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <div>
                    <h2 id="userProfileName">کاربر عادی</h2>
                    <p id="userProfileEmail">user@example.com</p>
                    <p>عضویت از: <span id="userJoinDate">۱۴۰۲/۰۱/۱۵</span></p>
                    <p>نقش: <span id="userRole" class="text-success">کاربر عادی</span></p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="editUserName">نام کاربری:</label>
                <input type="text" id="editUserName" class="form-control" value="کاربر عادی">
            </div>
            
            <div class="form-group">
                <label for="editUserEmail">ایمیل:</label>
                <input type="email" id="editUserEmail" class="form-control" value="user@example.com">
            </div>
            
            <div class="form-group">
                <label for="editUserPassword">تغییر رمز عبور:</label>
                <input type="password" id="editUserPassword" class="form-control" placeholder="رمز عبور جدید (اگر تغییر نمی‌دهید خالی بگذارید)">
            </div>
            
            <button type="button" class="btn btn-success" id="updateProfileBtn">به‌روزرسانی پروفایل</button>
        </div>
        
        <div class="tab-content" id="user-news">
            <h3 class="mb-20">اخبار منتشر شده توسط شما</h3>
            <div class="form-group">
                <input type="text" id="searchUserNews" class="form-control" placeholder="جستجو در اخبار شما...">
            </div>
            
            <div id="userPublishedNews">
                <!-- اخبار کاربر به صورت دینامیک نمایش داده می‌شود -->
            </div>
        </div>
        
        <div class="tab-content" id="user-settings">
            <h3 class="mb-20">تنظیمات کاربری</h3>
            <div class="form-group">
                <label for="notificationSettings">تنظیمات اطلاع‌رسانی:</label>
                <div>
                    <label style="display: block; margin-bottom: 10px;">
                        <input type="checkbox" id="notifyNews" checked> اطلاع‌رسانی برای اخبار جدید
                    </label>
                    <label style="display: block; margin-bottom: 10px;">
                        <input type="checkbox" id="notifyBroadcast" checked> اطلاع‌رسانی برای پخش‌های ویژه
                    </label>
                    <label style="display: block; margin-bottom: 10px;">
                        <input type="checkbox" id="notifyComments" checked> اطلاع‌رسانی برای نظرات جدید
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="themeSettings">تنظیمات ظاهر:</label>
                <select id="themeSettings" class="form-control">
                    <option value="light">حالت روشن</option>
                    <option value="dark">حالت تاریک</option>
                    <option value="auto">هماهنگ با سیستم</option>
                </select>
            </div>
            
            <button type="button" class="btn btn-success" id="saveUserSettingsBtn">ذخیره تنظیمات</button>
            <button type="button" class="btn btn-danger mt-20" id="logoutUserBtn">خروج از حساب کاربری</button>
        </div>
    </div>

    <!-- فوتر -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>درباره خبرگزاری حرفه‌ای</h3>
                    <p>پایگاه خبری حرفه‌ای با هدف ارائه آخرین اخبار و تحلیل‌های تحولات داخلی و بین‌المللی با رویکردی حرفه‌ای و بی‌طرف راه‌اندازی شده است.</p>
                </div>
                
                <div class="footer-section">
                    <h3>دسته‌بندی‌های خبری</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="nav-link" data-page="urgent">اخبار فوری</a></li>
                        <li><a href="#" class="nav-link" data-page="political">اخبار سیاسی</a></li>
                        <li><a href="#" class="nav-link" data-page="sport">اخبار ورزشی</a></li>
                        <li><a href="#" class="nav-link" data-page="economic">اخبار اقتصادی</a></li>
                        <li><a href="#" class="nav-link" data-page="tech">اخبار فناوری</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ارتباط با ما</h3>
                    <p><i class="fas fa-phone" style="margin-left: 10px;"></i> تلفن: ۰۲۱-۱۲۳۴۵۶۷۸</p>
                    <p><i class="fas fa-envelope" style="margin-left: 10px;"></i> ایمیل: info@pronews.ir</p>
                    <p><i class="fas fa-map-marker-alt" style="margin-left: 10px;"></i> آدرس: تهران، خیابان ولیعصر</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>کلیه حقوق این سایت متعلق به پایگاه خبری حرفه‌ای می‌باشد. © ۱۴۰۲ - طراحی و توسعه با ❤️</p>
            </div>
        </div>
    </footer>

    <!-- مودال ورود -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ورود به حساب کاربری</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">ایمیل:</label>
                        <input type="email" id="loginEmail" class="form-control" required placeholder="example@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">رمز عبور:</label>
                        <input type="password" id="loginPassword" class="form-control" required placeholder="رمز عبور">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="rememberMe"> مرا به خاطر بسپار
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-success" style="width: 100%;">ورود</button>
                    
                    <p class="text-center mt-20">
                        حساب کاربری ندارید؟ <a href="#" id="showRegister">ثبت‌نام کنید</a>
                    </p>
                    
                    <div class="text-center mt-20">
                        <button type="button" class="btn btn-urgent" id="adminDemoBtn">ورود به عنوان ادمین (دمو)</button>
                        <button type="button" class="btn btn-success mt-10" id="userDemoBtn">ورود به عنوان کاربر (دمو)</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- مودال ثبت‌نام -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ثبت‌نام در خبرگزاری حرفه‌ای</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerName">نام کامل:</label>
                        <input type="text" id="registerName" class="form-control" required placeholder="نام و نام خانوادگی">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerEmail">ایمیل:</label>
                        <input type="email" id="registerEmail" class="form-control" required placeholder="example@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerPassword">رمز عبور:</label>
                        <input type="password" id="registerPassword" class="form-control" required placeholder="رمز عبور (حداقل ۶ کاراکتر)">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerConfirmPassword">تکرار رمز عبور:</label>
                        <input type="password" id="registerConfirmPassword" class="form-control" required placeholder="تکرار رمز عبور">
                    </div>
                    
                    <button type="submit" class="btn btn-success" style="width: 100%;">ثبت‌نام</button>
                    
                    <p class="text-center mt-20">
                        قبلاً ثبت‌نام کرده‌اید؟ <a href="#" id="showLogin">وارد شوید</a>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <script>
        // داده‌های اولیه
        let currentUser = null;
        let isAdmin = false;
        let currentCategory = 'home';
        let editingNewsId = null;
        
        // داده‌های نمونه برای اخبار
        let newsData = {
            urgent: [
                {
                    id: 1,
                    title: "تصادف زنجیره‌ای در آزادراه تهران-شمال",
                    excerpt: "بر اثر بارش شدید باران، تصادف زنجیره‌ای در محور کندوان منجر به مسدود شدن این آزادراه شد.",
                    content: "بر اثر بارش شدید باران در محور کندوان، یک تصادف زنجیره‌ای شامل ۱۵ خودرو رخ داد که منجر به مسدود شدن کامل این آزادراه شده است. امدادگران در حال انتقال مجروحان به بیمارستان‌های اطراف هستند. به گزارش پلیس راه، احتمال بازگشایی مسیر تا ساعاتی دیگر وجود دارد. مسئولان اورژانس از مردم خواسته‌اند تا از تردد غیرضروری در این محور خودداری کنند.",
                    image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    video: "",
                    category: "urgent",
                    date: "۱۴۰۲/۰۲/۱۵ - ۱۴:۳۰",
                    views: 3250,
                    authorId: 1,
                    authorName: "علی محمدی"
                },
                {
                    id: 2,
                    title: "قطعی برق گسترده در مناطق مرکزی تهران",
                    excerpt: "به دلیل نقص فنی در پست اصلی برق، مناطق مرکزی تهران با قطعی برق مواجه شدند.",
                    content: "ساعت ۱۳ امروز به دلیل نقص فنی در پست اصلی برق منطقه ۶ تهران، قطعی گسترده‌ای در مناطق مرکزی پایتخت رخ داد. مسئولان شرکت برق منطقه‌ای اعلام کردند که تیم‌های فنی در حال رفع مشکل هستند و تا ساعاتی دیگر برق به طور کامل باز خواهد گشت. این قطعی برق بر عملکرد مراکز درمانی و اداری نیز تأثیر گذاشته است.",
                    image: "https://images.unsplash.com/photo-1629654291660-3c98113a0438?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    video: "",
                    category: "urgent",
                    date: "۱۴۰۲/۰۲/۱۵ - ۱۳:۱۵",
                    views: 2870,
                    authorId: 999,
                    authorName: "مدیر سیستم"
                }
            ],
            political: [
                {
                    id: 3,
                    title: "نشست اضطراری مجلس درباره تحریم‌های جدید",
                    excerpt: "نمایندگان مجلس امروز در نشستی اضطراری به بررسی تحریم‌های جدید علیه کشور پرداختند.",
                    content: "نشست اضطراری مجلس شورای اسلامی امروز با حضور وزرای امور خارجه، اقتصاد و رئیس بانک مرکزی برگزار شد. در این جلسه راهکارهای مقابله با تحریم‌های جدید مورد بررسی قرار گرفت. رئیس مجلس در پایان جلسه از تصویب بسته حمایتی جدید برای بخش‌های آسیب‌پذیر خبر داد. این بسته شامل کمک‌های نقدی و تسهیلات ویژه برای تولیدکنندگان داخلی خواهد بود.",
                    image: "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    category: "political",
                    date: "۱۴۰۲/۰۲/۱۴",
                    views: 4200,
                    authorId: 999,
                    authorName: "مدیر سیستم"
                }
            ],
            sport: [
                {
                    id: 4,
                    title: "قهرمانی پرسپولیس در لیگ برتر فوتبال",
                    excerpt: "تیم فوتبال پرسپولیس با پیروزی مقابل استقلال، برای سومین سال متوالی قهرمان لیگ برتر شد.",
                    content: "در دربی حساسی تهران، تیم فوتبال پرسپولیس با نتیجه ۲ بر ۱ استقلال را شکست داد و برای سومین سال متوالی عنوان قهرمانی لیگ برتر فوتبال ایران را از آن خود کرد. این بازی که با حضور ۸۰ هزار تماشاگر در ورزشگاه آزادی برگزار شد، یکی از جذابترین دربی‌های تاریخ فوتبال ایران لقب گرفت. گل پیروزی پرسپولیس در دقیقه ۸۵ به ثمر رسید.",
                    image: "https://images.unsplash.com/photo-1575361204480-aadea25e6e68?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    category: "sport",
                    date: "۱۴۰۲/۰۲/۱۳",
                    views: 12500,
                    authorId: 2,
                    authorName: "فاطمه کریمی"
                }
            ]
        };
        
        // داده‌های نمونه برای کاربران
        let usersData = [
            { id: 1, name: "علی محمدی", email: "ali@example.com", password: "123456", avatar: "https://ui-avatars.com/api/?name=علی+محمدی&background=2ecc71&color=fff", role: "user", joinDate: "۱۴۰۱/۱۱/۲۰" },
            { id: 2, name: "فاطمه کریمی", email: "fatemeh@example.com", password: "654321", avatar: "https://ui-avatars.com/api/?name=فاطمه+کریمی&background=9b59b6&color=fff", role: "user", joinDate: "۱۴۰۲/۰۱/۱۵" },
            { id: 3, name: "محمد رضایی", email: "mohammad@example.com", password: "mohammad123", avatar: "https://ui-avatars.com/api/?name=محمد+رضایی&background=e74c3c&color=fff", role: "user", joinDate: "۱۴۰۱/۱۲/۱۰" },
            { id: 999, name: "مدیر سیستم", email: "admin@example.com", password: "admin123", avatar: "https://ui-avatars.com/api/?name=مدیر+سیستم&background=3498db&color=fff", role: "admin", joinDate: "۱۴۰۱/۰۱/۰۱" }
        ];
        
        // تاریخچه پخش اخبار
        let broadcastHistory = [
            { id: 1, newsId: 1, title: "تصادف زنجیره‌ای در آزادراه تهران-شمال", target: "همه کاربران", date: "۱۴۰۲/۰۲/۱۵ - ۱۰:۳۰", sender: "مدیر سیستم" },
            { id: 2, newsId: 3, title: "نشست اضطراری مجلس درباره تحریم‌های جدید", target: "کاربران خاص", date: "۱۴۰۲/۰۲/۱۴ - ۱۵:۴۵", sender: "مدیر سیستم" }
        ];
        
        // تابع برای تولید آواتار تصادفی
        function generateRandomAvatar(name) {
            const colors = ['3498db', '2ecc71', '9b59b6', 'e74c3c', 'f39c12', '1abc9c'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            return `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${randomColor}&color=fff`;
        }
        
        // بارگذاری اولیه صفحه
        document.addEventListener('DOMContentLoaded', function() {
            // بارگذاری اخبار
            loadNewsForCategory('home');
            
            // بررسی وضعیت ورود کاربر
            checkLoginStatus();
            
            // رویدادهای مودال‌ها
            setupModalEvents();
            
            // رویدادهای پنل مدیریت
            setupAdminPanelEvents();
            
            // رویدادهای پنل کاربری
            setupUserPanelEvents();
            
            // رویدادهای ناوبری
            setupNavigationEvents();
            
            // رویدادهای صفحه افزودن خبر
            setupAddNewsEvents();
            
            // رویدادهای دایره پروفایل
            setupProfileCircleEvents();
            
            // نمایش پخش زنده دمو
            setupLiveDemo();
            
            // اضافه کردن متن‌های پیش‌فرض
            setupDefaultContent();
        });
        
        // رویدادهای دایره پروفایل
        function setupProfileCircleEvents() {
            // کلیک روی دایره پروفایل
            document.getElementById('profileCircle').addEventListener('click', function(e) {
                e.stopPropagation();
                const menu = document.getElementById('profileMenu');
                menu.classList.toggle('active');
            });
            
            // کلیک روی پنل مدیریت در منو
            document.getElementById('menuAdminPanel').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('profileMenu').classList.remove('active');
                showAdminPanel();
            });
            
            // کلیک روی پنل کاربری در منو
            document.getElementById('menuUserPanel').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('profileMenu').classList.remove('active');
                showUserPanel();
            });
            
            // کلیک روی خروج در منو
            document.getElementById('menuLogout').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('profileMenu').classList.remove('active');
                logout();
            });
            
            // بستن منو با کلیک در جای دیگر
            document.addEventListener('click', function() {
                document.getElementById('profileMenu').classList.remove('active');
            });
            
            // جلوگیری از بسته شدن منو وقتی روی آن کلیک می‌شود
            document.getElementById('profileMenu').addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
        
        // بارگذاری اخبار برای دسته‌بندی مشخص
        function loadNewsForCategory(category) {
            let containerId, newsArray;
            
            if (category === 'home') {
                containerId = 'newsContainer';
                // ترکیب اخبار از همه دسته‌بندی‌ها برای صفحه اصلی
                newsArray = [...newsData.urgent, ...newsData.political, ...newsData.sport]
                    .sort((a, b) => b.id - a.id) // مرتب‌سازی بر اساس جدیدترین
                    .slice(0, 6); // فقط 6 خبر آخر
            } else {
                containerId = category + 'NewsContainer';
                newsArray = newsData[category] || [];
            }
            
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            if (newsArray.length === 0) {
                container.innerHTML = `
                    <div class="text-center" style="grid-column: 1/-1; padding: 40px; background: #f9f9f9; border-radius: 8px;">
                        <i class="fas fa-newspaper fa-3x mb-20" style="color: #ccc;"></i>
                        <h3>هیچ خبری در این دسته‌بندی وجود ندارد</h3>
                        <p class="mt-20">اولین خبر را منتشر کنید!</p>
                        ${currentUser ? `<button class="btn btn-success mt-20 add-first-news-btn" data-category="${category}">افزودن اولین خبر</button>` : ''}
                    </div>
                `;
                
                // اضافه کردن رویداد به دکمه افزودن اولین خبر
                document.querySelectorAll('.add-first-news-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const category = this.getAttribute('data-category');
                        showAddNewsPage(category);
                    });
                });
                return;
            }
            
            newsArray.forEach(news => {
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card';
                newsCard.innerHTML = `
                    ${news.image ? `<img src="${news.image}" alt="${news.title}" class="news-image">` : ''}
                    <div class="news-content">
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-excerpt">${news.excerpt}</p>
                        <div class="news-meta">
                            <span><i class="fas fa-folder"></i> ${getCategoryName(news.category)}</span>
                            <span><i class="far fa-calendar-alt"></i> ${news.date.split(' - ')[0]}</span>
                            <span><i class="far fa-eye"></i> ${news.views.toLocaleString()}</span>
                        </div>
                        ${news.video ? '<div class="mt-10"><span class="btn btn-success btn-sm"><i class="fas fa-video"></i> دارای ویدیو</span></div>' : ''}
                        ${(currentUser && (currentUser.id === news.authorId || isAdmin)) ? `
                            <div class="news-actions">
                                <button class="btn btn-success btn-sm edit-news-btn" data-id="${news.id}"><i class="fas fa-edit"></i> ویرایش</button>
                                <button class="btn btn-danger btn-sm delete-news-btn" data-id="${news.id}"><i class="fas fa-trash"></i> حذف</button>
                            </div>
                        ` : ''}
                    </div>
                `;
                container.appendChild(newsCard);
            });
            
            // اضافه کردن رویداد به دکمه‌های ویرایش و حذف
            document.querySelectorAll('.edit-news-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const newsId = parseInt(this.getAttribute('data-id'));
                    editNews(newsId);
                });
            });
            
            document.querySelectorAll('.delete-news-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const newsId = parseInt(this.getAttribute('data-id'));
                    deleteNews(newsId);
                });
            });
        }
        
        // دریافت نام فارسی دسته‌بندی
        function getCategoryName(category) {
            const categories = {
                'urgent': 'فوری',
                'political': 'سیاسی',
                'sport': 'ورزشی',
                'economic': 'اقتصادی',
                'tech': 'فناوری'
            };
            return categories[category] || category;
        }
        
        // بررسی وضعیت ورود کاربر
        function checkLoginStatus() {
            const loggedIn = localStorage.getItem('newsSiteLoggedIn');
            const userData = localStorage.getItem('newsSiteUserData');
            
            if (loggedIn === 'true' && userData) {
                currentUser = JSON.parse(userData);
                isAdmin = currentUser.role === 'admin';
                
                updateUIForLoggedInUser();
            }
        }
        
        // به‌روزرسانی UI برای کاربر وارد شده
        function updateUIForLoggedInUser() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const profileCircle = document.getElementById('profileCircle');
            const profileCircleImg = document.getElementById('profileCircleImg');
            const menuAvatar = document.getElementById('menuAvatar');
            const menuName = document.getElementById('menuName');
            const menuEmail = document.getElementById('menuEmail');
            const menuAdminPanel = document.getElementById('menuAdminPanel');
            const menuUserPanel = document.getElementById('menuUserPanel');
            
            if (currentUser) {
                loginBtn.style.display = 'none';
                registerBtn.style.display = 'none';
                profileCircle.classList.remove('d-none');
                
                profileCircleImg.src = currentUser.avatar || generateRandomAvatar(currentUser.name);
                menuAvatar.src = currentUser.avatar || generateRandomAvatar(currentUser.name);
                menuName.textContent = currentUser.name;
                menuEmail.textContent = currentUser.email;
                
                // نمایش یا پنهان کردن گزینه پنل مدیریت
                if (isAdmin) {
                    menuAdminPanel.style.display = 'flex';
                    menuUserPanel.style.display = 'none';
                } else {
                    menuAdminPanel.style.display = 'none';
                    menuUserPanel.style.display = 'flex';
                }
            }
        }
        
        // رویدادهای مودال‌ها
        function setupModalEvents() {
            // دکمه‌های باز کردن مودال
            document.getElementById('loginBtn').addEventListener('click', () => showModal('loginModal'));
            document.getElementById('registerBtn').addEventListener('click', () => showModal('registerModal'));
            
            // دکمه‌های بستن مودال
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.classList.remove('active');
                    });
                });
            });
            
            // تغییر بین فرم‌های ورود و ثبت‌نام
            document.getElementById('showRegister').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('loginModal').classList.remove('active');
                document.getElementById('registerModal').classList.add('active');
            });
            
            document.getElementById('showLogin').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('registerModal').classList.remove('active');
                document.getElementById('loginModal').classList.add('active');
            });
            
            // فرم ورود
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                if (email && password) {
                    // جستجوی کاربر در داده‌های نمونه
                    const user = usersData.find(u => u.email === email && u.password === password);
                    
                    if (user) {
                        currentUser = { ...user };
                        isAdmin = currentUser.role === 'admin';
                        
                        // ذخیره در localStorage برای حالت دمو
                        localStorage.setItem('newsSiteLoggedIn', 'true');
                        localStorage.setItem('newsSiteUserData', JSON.stringify(currentUser));
                        
                        // به‌روزرسانی UI
                        updateUIForLoggedInUser();
                        
                        // بستن مودال
                        document.getElementById('loginModal').classList.remove('active');
                        
                        // نمایش پیام موفقیت
                        showNotification(`با موفقیت وارد شدید! ${isAdmin ? '(حالت ادمین)' : ''}`, 'success');
                    } else {
                        showNotification('ایمیل یا رمز عبور اشتباه است.', 'error');
                    }
                } else {
                    showNotification('لطفاً تمام فیلدها را پر کنید.', 'error');
                }
            });
            
            // فرم ثبت‌نام
            document.getElementById('registerForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                if (name && email && password && confirmPassword) {
                    if (password.length < 6) {
                        showNotification('رمز عبور باید حداقل ۶ کاراکتر باشد.', 'error');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        showNotification('رمز عبور و تکرار آن مطابقت ندارند.', 'error');
                        return;
                    }
                    
                    // بررسی وجود کاربر با این ایمیل
                    if (usersData.find(u => u.email === email)) {
                        showNotification('این ایمیل قبلاً ثبت‌نام کرده است.', 'error');
                        return;
                    }
                    
                    // ایجاد کاربر جدید
                    const newUser = {
                        id: Date.now(),
                        name: name,
                        email: email,
                        password: password,
                        avatar: generateRandomAvatar(name),
                        role: 'user',
                        joinDate: new Date().toLocaleDateString('fa-IR')
                    };
                    
                    // اضافه کردن به لیست کاربران
                    usersData.push(newUser);
                    
                    // تنظیم کاربر جاری
                    currentUser = { ...newUser };
                    isAdmin = false;
                    
                    // ذخیره در localStorage برای حالت دمو
                    localStorage.setItem('newsSiteLoggedIn', 'true');
                    localStorage.setItem('newsSiteUserData', JSON.stringify(currentUser));
                    
                    // به‌روزرسانی UI
                    updateUIForLoggedInUser();
                    
                    // بستن مودال
                    document.getElementById('registerModal').classList.remove('active');
                    
                    // نمایش پیام موفقیت
                    showNotification('ثبت‌نام با موفقیت انجام شد!', 'success');
                } else {
                    showNotification('لطفاً تمام فیلدها را پر کنید.', 'error');
                }
            });
            
            // دکمه دمو ادمین
            document.getElementById('adminDemoBtn').addEventListener('click', () => {
                document.getElementById('loginEmail').value = 'admin@example.com';
                document.getElementById('loginPassword').value = 'admin123';
                
                // شبیه‌سازی ارسال فرم
                const submitEvent = new Event('submit', { cancelable: true });
                document.getElementById('loginForm').dispatchEvent(submitEvent);
            });
            
            // دکمه دمو کاربر عادی
            document.getElementById('userDemoBtn').addEventListener('click', () => {
                document.getElementById('loginEmail').value = 'ali@example.com';
                document.getElementById('loginPassword').value = '123456';
                
                // شبیه‌سازی ارسال فرم
                const submitEvent = new Event('submit', { cancelable: true });
                document.getElementById('loginForm').dispatchEvent(submitEvent);
            });
        }
        
        // نمایش مودال
        function showModal(modalId) {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.getElementById(modalId).classList.add('active');
        }
        
        // نمایش پنل مدیریت
        function showAdminPanel() {
            // مخفی کردن همه صفحات
            hideAllPages();
            
            document.getElementById('adminPanel').classList.add('active');
            
            // بارگذاری اخبار منتشر شده
            loadPublishedNews();
            
            // بارگذاری کاربران
            loadUsersForAdmin();
            
            // بارگذاری اخبار برای پخش
            loadBroadcastNews();
            
            // بارگذاری تاریخچه پخش
            loadBroadcastHistory();
            
            // به‌روزرسانی اطلاعات پنل مدیریت
            updateAdminPanelInfo();
        }
        
        // نمایش پنل کاربری
        function showUserPanel() {
            // مخفی کردن همه صفحات
            hideAllPages();
            
            if (!currentUser) return;
            
            document.getElementById('userPanel').classList.add('active');
            
            // پر کردن اطلاعات پروفایل
            document.getElementById('userProfileName').textContent = currentUser.name;
            document.getElementById('userProfileEmail').textContent = currentUser.email;
            document.getElementById('userJoinDate').textContent = currentUser.joinDate;
            document.getElementById('userRole').textContent = currentUser.role === 'admin' ? 'مدیر سیستم' : 'کاربر عادی';
            document.getElementById('userRole').className = currentUser.role === 'admin' ? 'text-danger' : 'text-success';
            document.getElementById('userProfileAvatar').src = currentUser.avatar || generateRandomAvatar(currentUser.name);
            
            document.getElementById('editUserName').value = currentUser.name;
            document.getElementById('editUserEmail').value = currentUser.email;
            
            // بارگذاری اخبار کاربر
            loadUserPublishedNews();
        }
        
        // مخفی کردن همه صفحات
        function hideAllPages() {
            document.getElementById('homePage').classList.add('d-none');
            document.getElementById('urgentPage').classList.add('d-none');
            document.getElementById('politicalPage').classList.add('d-none');
            document.getElementById('sportPage').classList.add('d-none');
            document.getElementById('addNewsPage').classList.add('d-none');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('userPanel').classList.remove('active');
            
            // به‌روزرسانی منوی ناوبری
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
        }
        
        // نمایش صفحه خاص
        function showPage(pageId) {
            hideAllPages();
            
            // نمایش صفحه درخواستی
            document.getElementById(pageId + 'Page').classList.remove('d-none');
            
            // علامت‌گذاری لینک فعال در منو
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('data-page') === pageId) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            
            // بارگذاری اخبار مربوطه
            if (pageId !== 'addNews') {
                currentCategory = pageId;
                loadNewsForCategory(pageId);
            }
        }
        
        // رویدادهای ناوبری
        function setupNavigationEvents() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.getAttribute('data-page');
                    showPage(page);
                });
            });
            
            // دکمه‌های افزودن خبر در صفحات دسته‌بندی
            document.getElementById('addUrgentNewsBtn').addEventListener('click', () => showAddNewsPage('urgent'));
            document.getElementById('addPoliticalNewsBtn').addEventListener('click', () => showAddNewsPage('political'));
            document.getElementById('addSportNewsBtn').addEventListener('click', () => showAddNewsPage('sport'));
            
            // دکمه بازگشت از پنل مدیریت به خانه
            document.getElementById('backToHomeFromAdminBtn').addEventListener('click', () => {
                showPage('home');
            });
            
            // دکمه بازگشت از پنل کاربری به خانه
            document.getElementById('backToHomeFromUserBtn').addEventListener('click', () => {
                showPage('home');
            });
        }
        
        // نمایش صفحه افزودن/ویرایش خبر
        function showAddNewsPage(category, newsId = null) {
            // فقط اگر کاربر وارد شده باشد
            if (!currentUser) {
                showNotification('لطفاً ابتدا وارد حساب کاربری خود شوید.', 'error');
                showModal('loginModal');
                return;
            }
            
            hideAllPages();
            document.getElementById('addNewsPage').classList.remove('d-none');
            
            // تنظیم دسته‌بندی
            document.getElementById('newsCategory').value = category;
            document.getElementById('newsCategoryDisplay').textContent = getCategoryName(category);
            
            // تنظیم عنوان صفحه
            if (newsId) {
                editingNewsId = newsId;
                document.getElementById('addNewsTitle').textContent = `ویرایش خبر ${getCategoryName(category)}`;
                document.getElementById('submitNewsBtn').textContent = 'ذخیره تغییرات';
                
                // پیدا کردن خبر برای ویرایش
                let newsToEdit = null;
                for (const cat in newsData) {
                    const foundNews = newsData[cat].find(news => news.id === newsId);
                    if (foundNews) {
                        newsToEdit = foundNews;
                        break;
                    }
                }
                
                if (newsToEdit) {
                    // پر کردن فرم با اطلاعات خبر
                    document.getElementById('newsTitle').value = newsToEdit.title;
                    document.getElementById('newsContent').value = newsToEdit.content;
                    document.getElementById('newsImage').value = newsToEdit.image || '';
                    document.getElementById('newsVideo').value = newsToEdit.video || '';
                    document.getElementById('newsExcerpt').value = newsToEdit.excerpt || '';
                }
            } else {
                editingNewsId = null;
                document.getElementById('addNewsTitle').textContent = `افزودن خبر ${getCategoryName(category)}`;
                document.getElementById('submitNewsBtn').textContent = 'انتشار خبر';
                
                // پاک کردن فرم
                document.getElementById('addNewsForm').reset();
            }
        }
        
        // رویدادهای صفحه افزودن/ویرایش خبر
        function setupAddNewsEvents() {
            // دکمه بازگشت
            document.getElementById('backToCategoryBtn').addEventListener('click', () => {
                showPage(currentCategory);
            });
            
            // فرم افزودن/ویرایش خبر
            document.getElementById('addNewsForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const title = document.getElementById('newsTitle').value;
                const content = document.getElementById('newsContent').value;
                const image = document.getElementById('newsImage').value;
                const video = document.getElementById('newsVideo').value;
                const category = document.getElementById('newsCategory').value;
                const excerpt = document.getElementById('newsExcerpt').value;
                
                if (title && content && category) {
                    if (editingNewsId) {
                        // ویرایش خبر موجود
                        let newsUpdated = false;
                        for (const cat in newsData) {
                            const newsIndex = newsData[cat].findIndex(news => news.id === editingNewsId);
                            if (newsIndex !== -1) {
                                // اگر دسته‌بندی تغییر کرده، خبر را به دسته‌بندی جدید منتقل می‌کنیم
                                if (cat !== category) {
                                    const newsToMove = newsData[cat][newsIndex];
                                    newsData[cat].splice(newsIndex, 1);
                                    
                                    // اضافه کردن به دسته‌بندی جدید
                                    if (!newsData[category]) {
                                        newsData[category] = [];
                                    }
                                    newsData[category].push({
                                        ...newsToMove,
                                        title,
                                        content,
                                        image: image || newsToMove.image,
                                        video,
                                        category,
                                        excerpt: excerpt || content.substring(0, 150) + '...',
                                        authorName: currentUser.name
                                    });
                                } else {
                                    // فقط به‌روزرسانی خبر در همان دسته‌بندی
                                    newsData[cat][newsIndex] = {
                                        ...newsData[cat][newsIndex],
                                        title,
                                        content,
                                        image: image || newsData[cat][newsIndex].image,
                                        video,
                                        excerpt: excerpt || content.substring(0, 150) + '...'
                                    };
                                }
                                newsUpdated = true;
                                break;
                            }
                        }
                        
                        if (newsUpdated) {
                            showNotification(`خبر ${getCategoryName(category)} با موفقیت ویرایش شد!`, 'success');
                        }
                    } else {
                        // ایجاد خبر جدید
                        const newNews = {
                            id: Date.now(),
                            title: title,
                            excerpt: excerpt || (content.length > 150 ? content.substring(0, 150) + '...' : content),
                            content: content,
                            image: image || 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                            video: video,
                            category: category,
                            date: new Date().toLocaleDateString('fa-IR') + ' - ' + new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'}),
                            views: 0,
                            authorId: currentUser.id,
                            authorName: currentUser.name
                        };
                        
                        // اضافه کردن به لیست اخبار
                        if (!newsData[category]) {
                            newsData[category] = [];
                        }
                        newsData[category].unshift(newNews);
                        
                        showNotification(`خبر ${getCategoryName(category)} با موفقیت اضافه شد!`, 'success');
                    }
                    
                    // بازگشت به صفحه دسته‌بندی
                    showPage(category);
                } else {
                    showNotification('لطفاً عنوان و محتوای خبر را وارد کنید.', 'error');
                }
            });
            
            // دکمه پیش‌نمایش
            document.getElementById('previewNewsBtn').addEventListener('click', function() {
                const title = document.getElementById('newsTitle').value;
                const content = document.getElementById('newsContent').value;
                
                if (title && content) {
                    alert(`پیش‌نمایش خبر:\n\nعنوان: ${title}\n\nمحتوا: ${content.substring(0, 200)}...`);
                } else {
                    showNotification('لطفاً ابتدا عنوان و محتوای خبر را وارد کنید.', 'error');
                }
            });
        }
        
        // ویرایش خبر
        function editNews(newsId) {
            // پیدا کردن دسته‌بندی خبر
            let newsCategory = null;
            for (const category in newsData) {
                const foundNews = newsData[category].find(news => news.id === newsId);
                if (foundNews) {
                    newsCategory = category;
                    break;
                }
            }
            
            if (newsCategory) {
                showAddNewsPage(newsCategory, newsId);
            }
        }
        
        // حذف خبر
        function deleteNews(newsId) {
            if (confirm('آیا از حذف این خبر اطمینان دارید؟ این عمل قابل برگشت نیست.')) {
                // جستجو و حذف خبر از همه دسته‌بندی‌ها
                for (const category in newsData) {
                    const newsIndex = newsData[category].findIndex(news => news.id === newsId);
                    if (newsIndex !== -1) {
                        newsData[category].splice(newsIndex, 1);
                        break;
                    }
                }
                
                // بارگذاری مجدد
                loadNewsForCategory(currentCategory);
                
                // اگر در پنل مدیریت هستیم، آنجا را هم به‌روز کنیم
                if (document.getElementById('adminPanel').classList.contains('active')) {
                    loadPublishedNews();
                }
                
                // اگر در پنل کاربری هستیم، آنجا را هم به‌روز کنیم
                if (document.getElementById('userPanel').classList.contains('active')) {
                    loadUserPublishedNews();
                }
                
                showNotification('خبر با موفقیت حذف شد!', 'success');
            }
        }
        
        // رویدادهای پنل مدیریت
        function setupAdminPanelEvents() {
            // تغییر تب‌های مدیریت
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // به‌روزرسانی تب فعال
                    document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // نمایش محتوای تب مربوطه
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // جستجوی اخبار
            document.getElementById('searchNews').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const newsItems = document.querySelectorAll('#publishedNews .news-item');
                
                newsItems.forEach(item => {
                    const newsTitle = item.querySelector('h4').textContent.toLowerCase();
                    const newsCategory = item.querySelector('.news-category').textContent.toLowerCase();
                    
                    if (newsTitle.includes(searchTerm) || newsCategory.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
            
            // به‌روزرسانی پخش زنده
            document.getElementById('updateLiveBtn').addEventListener('click', () => {
                const status = document.getElementById('liveStatus').value;
                const title = document.getElementById('liveTitleInput').value;
                const description = document.getElementById('liveDescriptionInput').value;
                const streamUrl = document.getElementById('liveStreamUrl').value;
                
                if (title && description) {
                    // به‌روزرسانی بخش پخش زنده در صفحه اصلی
                    const liveTitleElement = document.getElementById('liveTitle');
                    const liveDescriptionElement = document.getElementById('liveDescription');
                    const livePlayerElement = document.getElementById('livePlayer');
                    
                    if (liveTitleElement) liveTitleElement.textContent = title;
                    if (liveDescriptionElement) liveDescriptionElement.textContent = description;
                    
                    if (status === 'active' && streamUrl) {
                        livePlayerElement.innerHTML = `
                            <div class="video-container">
                                <iframe src="${streamUrl}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                        `;
                    } else {
                        livePlayerElement.innerHTML = `
                            <div style="background: linear-gradient(135deg, #000, #2c3e50); color: white; height: 300px; display: flex; align-items: center; justify-content: center; border-radius: 5px;">
                                <i class="fas fa-satellite-dish fa-3x" style="margin-left: 15px;"></i>
                                <div>
                                    <h4>پخش زنده در حال انجام است</h4>
                                    <p>برای مشاهده پخش زنده، لطفاً وارد حساب کاربری خود شوید</p>
                                </div>
                            </div>
                        `;
                    }
                    
                    showNotification('پخش زنده با موفقیت به‌روزرسانی شد!', 'success');
                } else {
                    showNotification('لطفاً عنوان و توضیحات پخش زنده را وارد کنید.', 'error');
                }
            });
            
            // جستجوی کاربر
            document.getElementById('searchUser').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const userItems = document.querySelectorAll('#userList .user-item');
                
                userItems.forEach(item => {
                    const userName = item.querySelector('h4').textContent.toLowerCase();
                    const userEmail = item.querySelector('p').textContent.toLowerCase();
                    
                    if (userName.includes(searchTerm) || userEmail.includes(searchTerm)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
            
            // تغییر هدف پخش اخبار
            document.querySelectorAll('input[name="broadcastTarget"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const specificUsersContainer = document.getElementById('specificUsersContainer');
                    if (this.value === 'specific') {
                        specificUsersContainer.style.display = 'block';
                    } else {
                        specificUsersContainer.style.display = 'none';
                    }
                });
            });
            
            // ارسال خبر به کاربران
            document.getElementById('sendBroadcastBtn').addEventListener('click', function() {
                const newsId = parseInt(document.getElementById('broadcastNews').value);
                const message = document.getElementById('broadcastMessage').value;
                const target = document.querySelector('input[name="broadcastTarget"]:checked').value;
                
                if (!newsId) {
                    showNotification('لطفاً یک خبر را انتخاب کنید.', 'error');
                    return;
                }
                
                // پیدا کردن خبر
                let selectedNews = null;
                for (const category in newsData) {
                    const foundNews = newsData[category].find(news => news.id === newsId);
                    if (foundNews) {
                        selectedNews = foundNews;
                        break;
                    }
                }
                
                if (!selectedNews) {
                    showNotification('خبر انتخاب شده یافت نشد.', 'error');
                    return;
                }
                
                // ایجاد رکورد پخش
                const broadcastRecord = {
                    id: Date.now(),
                    newsId: newsId,
                    title: selectedNews.title,
                    target: target === 'all' ? 'همه کاربران' : 'کاربران خاص',
                    date: new Date().toLocaleDateString('fa-IR') + ' - ' + new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'}),
                    sender: currentUser.name,
                    message: message
                };
                
                // اضافه کردن به تاریخچه
                broadcastHistory.unshift(broadcastRecord);
                
                // بارگذاری مجدد تاریخچه
                loadBroadcastHistory();
                
                // نمایش پیام موفقیت
                showNotification(`خبر "${selectedNews.title}" با موفقیت برای ${broadcastRecord.target} ارسال شد!`, 'success');
                
                // پاک کردن فرم
                document.getElementById('broadcastMessage').value = '';
            });
            
            // حذف کاربر
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('delete-user-btn')) {
                    const userId = parseInt(e.target.getAttribute('data-id'));
                    
                    // جلوگیری از حذف خود ادمین
                    if (userId === 999) {
                        showNotification('نمی‌توانید حساب ادمین اصلی را حذف کنید.', 'error');
                        return;
                    }
                    
                    // جلوگیری از حذف خود کاربر جاری
                    if (userId === currentUser.id) {
                        showNotification('نمی‌توانید حساب کاربری خود را حذف کنید.', 'error');
                        return;
                    }
                    
                    if (confirm('آیا از حذف این کاربر اطمینان دارید؟ این عمل قابل برگشت نیست.')) {
                        const userIndex = usersData.findIndex(user => user.id === userId);
                        
                        if (userIndex !== -1) {
                            usersData.splice(userIndex, 1);
                            loadUsersForAdmin();
                            showNotification('کاربر با موفقیت حذف شد!', 'success');
                        }
                    }
                }
            });
            
            // حذف خبر از پنل مدیریت
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('admin-delete-news')) {
                    const newsId = parseInt(e.target.getAttribute('data-id'));
                    
                    if (confirm('آیا از حذف این خبر اطمینان دارید؟ این عمل قابل برگشت نیست.')) {
                        // جستجو و حذف خبر از همه دسته‌بندی‌ها
                        for (const category in newsData) {
                            const newsIndex = newsData[category].findIndex(news => news.id === newsId);
                            if (newsIndex !== -1) {
                                newsData[category].splice(newsIndex, 1);
                                break;
                            }
                        }
                        
                        // بارگذاری مجدد
                        loadPublishedNews();
                        loadNewsForCategory(currentCategory);
                        loadBroadcastNews();
                        
                        showNotification('خبر با موفقیت حذف شد!', 'success');
                    }
                }
            });
            
            // ویرایش خبر از پنل مدیریت
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('admin-edit-news')) {
                    const newsId = parseInt(e.target.getAttribute('data-id'));
                    editNews(newsId);
                }
            });
        }
        
        // بارگذاری اخبار منتشر شده در پنل مدیریت
        function loadPublishedNews() {
            const publishedNewsContainer = document.getElementById('publishedNews');
            publishedNewsContainer.innerHTML = '';
            
            // جمع‌آوری همه اخبار از همه دسته‌بندی‌ها
            let allNews = [];
            for (const category in newsData) {
                const categoryNews = newsData[category].map(news => ({...news, category}));
                allNews = [...allNews, ...categoryNews];
            }
            
            // مرتب‌سازی بر اساس تاریخ (جدیدترین اول)
            allNews.sort((a, b) => b.id - a.id);
            
            if (allNews.length === 0) {
                publishedNewsContainer.innerHTML = '<div class="text-center" style="padding: 40px; background: #f9f9f9; border-radius: 8px;"><h4>هیچ خبری منتشر نشده است</h4></div>';
                return;
            }
            
            allNews.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.style.cssText = 'background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 15px;';
                newsItem.innerHTML = `
                    <div class="d-flex justify-between align-center">
                        <div style="flex: 1;">
                            <h4>${news.title}</h4>
                            <div class="d-flex mt-5 align-center">
                                <span class="news-category" style="background: #e0e0e0; padding: 2px 8px; border-radius: 3px; font-size: 12px;">${getCategoryName(news.category)}</span>
                                <span style="margin-right: 15px; color: #666; font-size: 14px;">${news.date.split(' - ')[0]}</span>
                                <span style="color: #666; font-size: 14px;"><i class="far fa-eye"></i> ${news.views.toLocaleString()}</span>
                                <span style="margin-right: 15px; color: #666; font-size: 14px;">نویسنده: ${news.authorName || 'ناشناس'}</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-success btn-sm admin-edit-news" data-id="${news.id}">ویرایش</button>
                            <button class="btn btn-danger btn-sm admin-delete-news" data-id="${news.id}">حذف</button>
                        </div>
                    </div>
                `;
                publishedNewsContainer.appendChild(newsItem);
            });
        }
        
        // بارگذاری کاربران برای پنل مدیریت
        function loadUsersForAdmin() {
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            
            if (usersData.length === 0) {
                userList.innerHTML = '<div class="text-center" style="padding: 40px; background: #f9f9f9; border-radius: 8px;"><h4>هیچ کاربری ثبت‌نام نکرده است</h4></div>';
                return;
            }
            
            usersData.forEach(user => {
                const userItem = document.createElement('li');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div class="user-info">
                        <img src="${user.avatar}" alt="${user.name}">
                        <div class="user-details">
                            <h4>${user.name} ${user.role === 'admin' ? '<span style="background: #e74c3c; color: white; padding: 2px 8px; border-radius: 3px; font-size: 12px;">ادمین</span>' : '<span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 3px; font-size: 12px;">کاربر</span>'}</h4>
                            <p>${user.email}</p>
                            <div class="user-password">رمز عبور: ${user.password}</div>
                            <small>عضویت از: ${user.joinDate} | شناسه: ${user.id}</small>
                        </div>
                    </div>
                    <div>
                        ${user.id !== 999 && user.id !== currentUser.id ? `<button class="btn btn-danger btn-sm delete-user-btn" data-id="${user.id}">حذف کاربر</button>` : ''}
                    </div>
                `;
                userList.appendChild(userItem);
            });
        }
        
        // بارگذاری اخبار برای پخش
        function loadBroadcastNews() {
            const broadcastNewsSelect = document.getElementById('broadcastNews');
            const specificUsersSelect = document.getElementById('specificUsers');
            
            broadcastNewsSelect.innerHTML = '<option value="">یک خبر را انتخاب کنید</option>';
            specificUsersSelect.innerHTML = '';
            
            // جمع‌آوری همه اخبار
            let allNews = [];
            for (const category in newsData) {
                const categoryNews = newsData[category].map(news => ({...news, category}));
                allNews = [...allNews, ...categoryNews];
            }
            
            // مرتب‌سازی بر اساس تاریخ (جدیدترین اول)
            allNews.sort((a, b) => b.id - a.id);
            
            allNews.forEach(news => {
                const option = document.createElement('option');
                option.value = news.id;
                option.textContent = `${news.title} (${getCategoryName(news.category)})`;
                broadcastNewsSelect.appendChild(option);
            });
            
            // اضافه کردن کاربران به لیست انتخاب
            usersData.forEach(user => {
                if (user.role !== 'admin') {
                    const option = document.createElement('option');
                    option.value = user.id;
                    option.textContent = `${user.name} (${user.email})`;
                    specificUsersSelect.appendChild(option);
                }
            });
        }
        
        // بارگذاری تاریخچه پخش
        function loadBroadcastHistory() {
            const broadcastHistoryContainer = document.getElementById('broadcastHistory');
            broadcastHistoryContainer.innerHTML = '';
            
            if (broadcastHistory.length === 0) {
                broadcastHistoryContainer.innerHTML = '<div class="text-center" style="padding: 20px; background: #f9f9f9; border-radius: 8px;"><p>هیچ پخشی انجام نشده است</p></div>';
                return;
            }
            
            broadcastHistory.forEach(record => {
                const recordItem = document.createElement('div');
                recordItem.className = 'news-item';
                recordItem.style.cssText = 'background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 10px;';
                recordItem.innerHTML = `
                    <div>
                        <h5>${record.title}</h5>
                        <div class="d-flex mt-5 align-center">
                            <span style="background: #e0e0e0; padding: 2px 8px; border-radius: 3px; font-size: 12px;">${record.target}</span>
                            <span style="margin-right: 15px; color: #666; font-size: 12px;">${record.date}</span>
                            <span style="color: #666; font-size: 12px;">ارسال کننده: ${record.sender}</span>
                        </div>
                        ${record.message ? `<p class="mt-10" style="color: #666; font-size: 14px;">پیام همراه: ${record.message}</p>` : ''}
                    </div>
                `;
                broadcastHistoryContainer.appendChild(recordItem);
            });
        }
        
        // به‌روزرسانی اطلاعات پنل مدیریت
        function updateAdminPanelInfo() {
            // محاسبه آمار
            let totalNews = 0;
            for (const category in newsData) {
                totalNews += newsData[category].length;
            }
            
            const totalUsers = usersData.length;
            const adminUsers = usersData.filter(u => u.role === 'admin').length;
            const regularUsers = totalUsers - adminUsers;
            
            // نمایش آمار در تب مدیریت اخبار
            const newsManagementTab = document.getElementById('news-management');
            
            // اگر آمار هنوز نمایش داده نشده، اضافه کن
            if (!document.querySelector('.admin-stats')) {
                const statsHtml = `
                    <div class="d-flex justify-between mb-20 admin-stats" style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 15px; border-radius: 8px;">
                        <div class="text-center">
                            <h3 class="text-danger">${totalNews}</h3>
                            <p>تعداد کل اخبار</p>
                        </div>
                        <div class="text-center">
                            <h3 class="text-success">${totalUsers}</h3>
                            <p>تعداد کاربران</p>
                        </div>
                        <div class="text-center">
                            <h3 class="text-warning">${adminUsers}</h3>
                            <p>تعداد ادمین‌ها</p>
                        </div>
                    </div>
                `;
                newsManagementTab.insertAdjacentHTML('afterbegin', statsHtml);
            }
        }
        
        // بارگذاری اخبار منتشر شده توسط کاربر
        function loadUserPublishedNews() {
            const userPublishedNewsContainer = document.getElementById('userPublishedNews');
            if (!userPublishedNewsContainer) return;
            
            userPublishedNewsContainer.innerHTML = '';
            
            if (!currentUser) return;
            
            // جمع‌آوری اخبار کاربر
            let userNews = [];
            for (const category in newsData) {
                const categoryNews = newsData[category]
                    .filter(news => news.authorId === currentUser.id)
                    .map(news => ({...news, category}));
                userNews = [...userNews, ...categoryNews];
            }
            
            // مرتب‌سازی بر اساس تاریخ (جدیدترین اول)
            userNews.sort((a, b) => b.id - a.id);
            
            if (userNews.length === 0) {
                userPublishedNewsContainer.innerHTML = '<div class="text-center" style="padding: 20px; background: #f9f9f9; border-radius: 8px;"><p>شما هنوز خبری منتشر نکرده‌اید.</p></div>';
                return;
            }
            
            userNews.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.style.cssText = 'background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 10px;';
                newsItem.innerHTML = `
                    <div class="d-flex justify-between align-center">
                        <div style="flex: 1;">
                            <h5>${news.title}</h5>
                            <div class="d-flex mt-5">
                                <span style="background: #e0e0e0; padding: 2px 8px; border-radius: 3px; font-size: 12px;">${getCategoryName(news.category)}</span>
                                <span style="margin-right: 15px; color: #666; font-size: 12px;">${news.date.split(' - ')[0]}</span>
                                <span style="color: #666; font-size: 12px;"><i class="far fa-eye"></i> ${news.views.toLocaleString()}</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-success btn-sm edit-user-news" data-id="${news.id}">ویرایش</button>
                            <button class="btn btn-danger btn-sm delete-user-news" data-id="${news.id}">حذف</button>
                        </div>
                    </div>
                `;
                userPublishedNewsContainer.appendChild(newsItem);
            });
            
            // جستجو در اخبار کاربر
            document.getElementById('searchUserNews').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const newsItems = userPublishedNewsContainer.querySelectorAll('.news-item');
                
                newsItems.forEach(item => {
                    const newsTitle = item.querySelector('h5').textContent.toLowerCase();
                    const newsCategory = item.querySelector('span').textContent.toLowerCase();
                    
                    if (newsTitle.includes(searchTerm) || newsCategory.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
            
            // اضافه کردن رویداد به دکمه‌های ویرایش و حذف
            document.querySelectorAll('.edit-user-news').forEach(btn => {
                btn.addEventListener('click', function() {
                    const newsId = parseInt(this.getAttribute('data-id'));
                    editNews(newsId);
                });
            });
            
            document.querySelectorAll('.delete-user-news').forEach(btn => {
                btn.addEventListener('click', function() {
                    const newsId = parseInt(this.getAttribute('data-id'));
                    deleteNews(newsId);
                });
            });
        }
        
        // رویدادهای پنل کاربری
        function setupUserPanelEvents() {
            // تغییر آواتار
            document.getElementById('changeAvatarBtn').addEventListener('click', function() {
                const newAvatarUrl = prompt('لطفاً آدرس تصویر جدید را وارد کنید:', currentUser.avatar);
                if (newAvatarUrl) {
                    document.getElementById('userProfileAvatar').src = newAvatarUrl;
                    document.getElementById('profileCircleImg').src = newAvatarUrl;
                    document.getElementById('menuAvatar').src = newAvatarUrl;
                    
                    // به‌روزرسانی در currentUser
                    if (currentUser) {
                        currentUser.avatar = newAvatarUrl;
                        
                        // به‌روزرسانی در لیست کاربران
                        const userIndex = usersData.findIndex(u => u.id === currentUser.id);
                        if (userIndex !== -1) {
                            usersData[userIndex].avatar = newAvatarUrl;
                        }
                        
                        localStorage.setItem('newsSiteUserData', JSON.stringify(currentUser));
                    }
                    
                    showNotification('تصویر پروفایل با موفقیت تغییر کرد!', 'success');
                }
            });
            
            // به‌روزرسانی پروفایل
            document.getElementById('updateProfileBtn').addEventListener('click', function() {
                const newName = document.getElementById('editUserName').value;
                const newEmail = document.getElementById('editUserEmail').value;
                const newPassword = document.getElementById('editUserPassword').value;
                
                if (newName && newEmail) {
                    // به‌روزرسانی اطلاعات کاربر
                    if (currentUser) {
                        currentUser.name = newName;
                        currentUser.email = newEmail;
                        
                        // اگر رمز عبور جدید وارد شده
                        if (newPassword) {
                            if (newPassword.length < 6) {
                                showNotification('رمز عبور باید حداقل ۶ کاراکتر باشد.', 'error');
                                return;
                            }
                            currentUser.password = newPassword;
                            showNotification('رمز عبور با موفقیت تغییر کرد!', 'success');
                        }
                        
                        // به‌روزرسانی در لیست کاربران
                        const userIndex = usersData.findIndex(u => u.id === currentUser.id);
                        if (userIndex !== -1) {
                            usersData[userIndex].name = newName;
                            usersData[userIndex].email = newEmail;
                            if (newPassword) {
                                usersData[userIndex].password = newPassword;
                            }
                        }
                        
                        // ذخیره در localStorage
                        localStorage.setItem('newsSiteUserData', JSON.stringify(currentUser));
                        
                        // به‌روزرسانی UI
                        document.getElementById('userProfileName').textContent = newName;
                        document.getElementById('userProfileEmail').textContent = newEmail;
                        document.getElementById('menuName').textContent = newName;
                        document.getElementById('menuEmail').textContent = newEmail;
                        document.getElementById('profileCircleImg').src = currentUser.avatar || generateRandomAvatar(newName);
                        document.getElementById('menuAvatar').src = currentUser.avatar || generateRandomAvatar(newName);
                        
                        showNotification('پروفایل با موفقیت به‌روزرسانی شد!', 'success');
                    }
                } else {
                    showNotification('لطفاً نام و ایمیل را وارد کنید.', 'error');
                }
            });
            
            // ذخیره تنظیمات کاربر
            document.getElementById('saveUserSettingsBtn').addEventListener('click', function() {
                showNotification('تنظیمات کاربری با موفقیت ذخیره شد!', 'success');
            });
            
            // خروج از حساب کاربری
            document.getElementById('logoutUserBtn').addEventListener('click', logout);
        }
        
        // تنظیم پخش زنده دمو
        function setupLiveDemo() {
            // در حالت دمو، اگر کاربر وارد شده باشد، پخش زنده نمایش داده می‌شود
            const livePlayer = document.getElementById('livePlayer');
            
            // شبیه‌سازی پخش زنده
            setInterval(() => {
                if (currentUser) {
                    const liveIndicator = document.querySelector('.live-indicator');
                    if (liveIndicator) {
                        liveIndicator.style.animation = 'pulse 2s infinite';
                    }
                }
            }, 2000);
        }
        
        // تنظیم محتوای پیش‌فرض
        function setupDefaultContent() {
            // اضافه کردن متن‌های پیش‌فرض برای نمایش
            const defaultContent = {
                liveTitle: "گزارش زنده از نشست اضطراری مجلس درباره تحولات منطقه",
                liveDescription: "پوشش زنده نشست اضطراری مجلس شورای اسلامی درباره تحولات منطقه‌ای و تصمیم‌گیری در مورد سیاست‌های خارجی کشور. نمایندگان به صورت زنده نظرات خود را ارائه می‌دهند."
            };
            
            // اگر محتوای پخش زنده خالی است، از پیش‌فرض استفاده کن
            if (!document.getElementById('liveTitle').textContent) {
                document.getElementById('liveTitle').textContent = defaultContent.liveTitle;
                document.getElementById('liveDescription').textContent = defaultContent.liveDescription;
                document.getElementById('liveTitleInput').value = defaultContent.liveTitle;
                document.getElementById('liveDescriptionInput').value = defaultContent.liveDescription;
            }
        }
        
        // خروج از حساب کاربری
        function logout() {
            if (confirm('آیا می‌خواهید از حساب کاربری خود خارج شوید؟')) {
                currentUser = null;
                isAdmin = false;
                
                // حذف از localStorage
                localStorage.removeItem('newsSiteLoggedIn');
                localStorage.removeItem('newsSiteUserData');
                
                // به‌روزرسانی UI
                document.getElementById('loginBtn').style.display = 'inline-block';
                document.getElementById('registerBtn').style.display = 'inline-block';
                document.getElementById('profileCircle').classList.add('d-none');
                
                // پنهان کردن پنل‌ها
                document.getElementById('adminPanel').classList.remove('active');
                document.getElementById('userPanel').classList.remove('active');
                document.getElementById('profileMenu').classList.remove('active');
                
                // نمایش صفحه اصلی
                showPage('home');
                
                showNotification('با موفقیت از حساب کاربری خارج شدید.', 'success');
            }
        }
        
        // نمایش نوتیفیکیشن
        function showNotification(message, type) {
            // ایجاد عنصر نوتیفیکیشن
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                padding: 15px 25px;
                background-color: ${type === 'success' ? '#27ae60' : '#e74c3c'};
                color: white;
                border-radius: 5px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                z-index: 3000;
                animation: fadeIn 0.3s ease, fadeOut 0.3s ease 2.7s;
                font-weight: 600;
                max-width: 400px;
            `;
            
            document.body.appendChild(notification);
            
            // حذف خودکار بعد از 3 ثانیه
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
        
        // اضافه کردن استایل برای fadeOut
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
